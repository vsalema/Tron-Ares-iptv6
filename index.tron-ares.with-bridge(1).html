<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tron Ares IPTV Player</title>

  <!-- Police futuriste -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- HLS & DASH -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/dashjs@latest/dist/dash.all.min.js"></script>

  <link rel="stylesheet" href="tron-ares.css">
</head>
<body>
<div class="app-shell" id="appShell">
  <!-- Sidebar: playlists -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">Playlist Grid</div>
      <div class="status-pill" id="statusPill">Idle</div>
    </div>
<div class="tabs">
  <button class="tab-btn" data-tab="fr">
    <span>ğŸ‡«ğŸ‡·</span>ChaÃ®nes FR M3U
  </button>

  <button class="tab-btn active" data-tab="channels">
    <span>ğŸ¥</span>Film M3U
  </button>

  <button class="tab-btn" data-tab="iframes">
    <span>â– </span> ğŸ‡µğŸ‡¹ port / iFrame
  </button>

  <button class="tab-btn" data-tab="favorites">
    <span>â˜…</span> Favoris
  </button>
</div>
<div class="search-row">
  <div class="search-bar">
    <div class="search-wrapper">
      <input id="globalSearchInput" class="input search-input"
             placeholder="Rechercher (toutes listes)â€¦" />
      <button id="clearSearchBtn" class="clear-search-btn">âœ–</button>
    </div>

    <button class="btn btn-ghost film-access-btn" id="filmAccessBtn" title="AccÃ¨s Films">ğŸ”’ Films</button>
  </div>
</div>
<!-- Mini player radio R.Alfa -->
<div id="miniRadioPlayer" class="mini-radio">
  <img class="mini-radio-logo" src="https://vsalema.github.io/ipodfm/img/Radio_Alfa.png">

  <div class="mini-radio-info">
    <div class="mini-radio-title">R.Alfa</div>
    <div class="mini-radio-rds">Hit Music Only</div>
  </div>

  <!-- Fake visualizer -->
  <div class="mini-radio-viz" id="miniRadioViz">
    <span class="mini-radio-viz-bar"></span>
    <span class="mini-radio-viz-bar"></span>
    <span class="mini-radio-viz-bar"></span>
    <span class="mini-radio-viz-bar"></span>
  </div>

  <button id="radioPlayBtn" class="mini-radio-btn">â–¶</button>
</div>

<div class="lists-container">
  <div class="scroll-fade"></div>

  <!-- FR d'abord et active -->
  <div class="list active" id="channelFrList"></div>

  <!-- Films ensuite -->
  <div class="list" id="channelList"></div>

  <div class="list" id="iframeList"></div>
  <div class="list" id="favoriteList"></div>
</div>
<div class="loader-panel">

  <!-- SECTION 1 : Charger une playlist ou une source -->
  <div class="loader-section" data-section="playlist">
    <div class="loader-label collapsible-label">
      <span>Charger une playlist ou une source</span>
      <span class="loader-toggle-icon">â–¸</span>
    </div>

    <div class="loader-section-body">
      <div class="loader-row">
        <input id="urlInput" class="input" placeholder="URL d'un flux ou d'une playlist M3Uâ€¦" />
        <button class="btn btn-ghost" id="loadUrlBtn">Charger</button>
      </div>
      <div class="loader-subrow">
        <span>HTTP(S), M3U, HLS, MP4, MP3, YouTubeâ€¦</span>
      </div>

      <div class="loader-row">
        <input type="file" id="fileInput" class="file-input"
               accept=".m3u,.m3u8,.mp4,.mp3,.mpd,.ts,.aac,.flv,.mov,video/*,audio/*" />
        <button class="btn btn-ghost" id="openFileBtn">Ouvrir un fichier local</button>
      </div>
      <div class="loader-subrow">
        <span id="fileNameLabel">Aucun fichier sÃ©lectionnÃ©</span>
      </div>

      <div class="loader-label" style="margin-top:4px;">Ajouter un overlay iFrame</div>
      <div class="loader-row">
        <input id="iframeTitleInput" class="input" placeholder="Titre overlay / site / widgetâ€¦" />
      </div>
      <div class="loader-row">
        <input id="iframeUrlInput" class="input" placeholder="URL iFrame ou vidÃ©o YouTubeâ€¦" />
        <button class="btn btn-accent" id="addIframeBtn">+ Ajouter</button>
      </div>
    </div>
  </div>

  <!-- SECTION 2 : JSON M3U / iFrame -->
  <div class="loader-section" data-section="json">
    <div class="loader-label collapsible-label">
      <span>JSON M3U / iFrame</span>
      <span class="loader-toggle-icon">â–¸</span>
    </div>

    <div class="loader-section-body">
      <div class="loader-row">
        <button class="btn btn-ghost" id="exportM3uJsonBtn">Export M3U â†’ JSON</button>
        <button class="btn btn-ghost" id="exportIframeJsonBtn">Export iFrame â†’ JSON</button>
      </div>
      <div class="loader-row">
        <button class="btn btn-accent" id="importJsonBtn">Importer JSON</button>
      </div>
      <div class="loader-row">
        <textarea id="jsonArea" class="input"
                  style="height:80px; resize:vertical; font-family:monospace; border-radius:12px;"
                  placeholder="Colle ici le JSON Ã  importer, ou regarde le JSON exportÃ©â€¦"></textarea>
      </div>
    </div>
  </div>

</div>

    
  </aside>

  <!-- Main: player -->
  <main class="main">
    <div class="top-bar">
      <div class="top-bar-left">
        <!-- tu peux mettre des infos ici plus tard si tu veux -->
      </div>

      <!-- Banner tron Ares centrÃ© (ne change pas la hauteur) -->
      <div class="top-bar-banner">
        <img src="https://vsalema.github.io/tvpt4/css/ChatGPT Image 6 dÃ©c. 2025, 19_05_13.png"
             alt="Tron Ares IPTV Player"
             class="banner-img">
      </div>

      <div class="top-bar-right">
        <button class="btn btn-ghost" id="themeToggleBtn">ThÃ¨me : Cyan/Orange</button>
        <button class="btn btn-ghost" id="fxToggleBtn">FX Tron+</button>
        <button class="btn btn-ghost" id="pipToggleBtn">PiP</button>
        <button class="btn btn-ghost btn-icon" id="openStreamUrlBtn" title="Tester un Stream URL">ğŸ”—</button>
        <button class="btn btn-ghost" id="toggleOverlayBtn">VidÃ©o / iFrame</button>
        <button class="btn btn-ghost" id="fullPageBtn">Plein Ã©cran</button>
        <button class="toggle-sidebar-btn" id="toggleSidebarBtn" aria-label="Menu sidebar">
          <span class="burger-left">â˜°</span>
          <span class="burger-center"></span>
          <span class="burger-right">â˜°</span>
        </button>
      </div>
    </div>

    <section class="player-shell player-grid-lines" id="playerContainer">
      <div class="player-inner">
        <video id="videoEl" controls preload="metadata"></video>
        <div class="iframe-overlay hidden" id="iframeOverlay">
          <iframe id="iframeEl" allowfullscreen></iframe>
        </div>
      </div>
    </section>
<!-- RADIO FULLSCREEN INSIDE PLAYER -->
<div id="radioPanel" class="radio-panel hidden" aria-hidden="true">
  <button id="radioPanelClose" class="radio-panel-close" title="Retour diffusion">âœ•</button>

  <div class="radio-panel-card">
    <div class="radio-panel-header">
      <div class="radio-panel-logo-wrap">
        <img class="radio-panel-logo"
             src="https://vsalema.github.io/ipodfm/img/Radio_Alfa.png"
             alt="Radio Alfa">
      </div>
      <div class="radio-panel-meta">
        <div class="radio-panel-title">R.Alfa</div>
        <div class="radio-panel-sub">Hit Music Only</div>
      </div>
    </div>

    <div class="radio-panel-viz" aria-hidden="true">
      <span></span><span></span><span></span><span></span><span></span>
      <span></span><span></span><span></span><span></span><span></span>
    </div>

    <div class="radio-panel-actions">
      <button id="radioPanelPlay" class="radio-panel-btn radio-panel-btn-primary">â¸ Pause</button>
      <button id="radioPanelBack" class="radio-panel-btn">â†© Retour diffusion</button>
    </div>
  </div>
</div>

    <footer class="bottom-bar">
      <button class="nav-btn" id="prevBtn">
        <span class="nav-label-arrow">â—€</span>
        Prev
      </button>

      <div class="now-playing" id="nowPlaying">
  <div class="np-logo" id="npLogo"></div>
  <div class="np-text">
    <div class="np-title" id="npTitle">Aucune chaÃ®ne sÃ©lectionnÃ©e</div>
    <div class="np-sub" id="npSub">Choisissez une chaÃ®ne dans la liste</div>
  </div>
  <div class="np-badge" id="npBadge">IDLE</div>
  <div class="np-counter" id="npCounter">-/-</div>

  <!-- Nouveau bloc contrÃ´les films (channelList) -->
  <div class="np-tracks" id="npTracks">

    <!-- Bouton Audio -->
    <div class="np-track-group" id="audioGroup">
      <button class="icon-btn np-track-btn" id="audioTrackBtn" title="Changer la piste audio">
        ğŸ”Š
      </button>
      <div class="np-track-menu" id="audioTrackMenu"></div>
    </div>

    <!-- Bouton Sous-titres -->
    <div class="np-track-group" id="subtitleGroup">
      <button class="icon-btn np-track-btn" id="subtitleTrackBtn" title="Sous-titres">
        ğŸ’¬
      </button>
      <div class="np-track-menu" id="subtitleTrackMenu"></div>
    </div>

  </div>
</div>


      <button class="nav-btn" id="nextBtn">
        Next
        <span class="nav-label-arrow">â–¶</span>
      </button>

      <div class="helper-text">
        Next / Prev changent la chaÃ®ne <span>M3U</span> active.
      </div>
    </footer>
  
</main>
</div>

<!-- STREAM URL (Akamai-style) -->
<div id="streamUrlOverlay" class="streamurl-overlay hidden" aria-hidden="true">
  <div class="streamurl-card" role="dialog" aria-modal="true" aria-label="Stream URL">
    <div class="streamurl-header">
      <div class="streamurl-title">Stream URL</div>
      <button id="streamUrlCloseBtn" class="streamurl-close" title="Fermer">âœ•</button>
    </div>

    <label class="streamurl-label" for="streamUrlInput">URL</label>
    <input id="streamUrlInput" class="streamurl-input" type="url" inputmode="url"
           placeholder="https://â€¦/master.m3u8 (ou .mpd / mp3 / aac)">

    <label class="streamurl-label" for="streamTitleInput">Titre (option)</label>
    <input id="streamTitleInput" class="streamurl-input" type="text" placeholder="Nom affichÃ©">

    <div class="streamurl-actions">
      <button id="streamUrlPlayBtn" class="btn btn-accent">Play</button>
      <button id="streamUrlCopyBtn" class="btn btn-ghost">Copier lien</button>
    </div>

    <div class="streamurl-hint">Astuce : tu peux aussi ouvrir directement <span>?streamUrl=â€¦</span></div>
  </div>
</div>

<!-- ğŸ”’ Modal restriction Films (PIN) -->
<div id="movieLockBackdrop" class="tron-lock-backdrop hidden" aria-hidden="true">
  <div class="tron-lock-modal" role="dialog" aria-modal="true" aria-label="Restriction Films">
    <div class="tron-lock-title">ğŸ”’ AccÃ¨s Films</div>
    <div class="tron-lock-sub" id="movieLockHint">Aucun PIN nâ€™est dÃ©fini. Cliquez sur Â« DÃ©finir / changer PIN Â» pour activer la restriction.</div>

    <input class="tron-lock-input" id="movieLockPinInput" type="password" inputmode="numeric"
           placeholder="PIN (4 chiffres ou plus)" autocomplete="current-password" />

    <div class="tron-lock-actions">
      <button class="btn btn-accent" id="movieLockUnlockBtn">DÃ©verrouiller</button>
      <button class="btn btn-ghost" id="movieLockSetPinBtn">DÃ©finir / changer PIN</button>
      <button class="btn btn-ghost" id="movieLockLockBtn">Verrouiller</button>
      <button class="btn btn-ghost" id="movieLockCancelBtn">Annuler</button>
    </div>

    <div class="tron-lock-foot">
      DÃ©verrouillage temporaire (session). Fermer lâ€™onglet/verrouiller rÃ©active la restriction.
    </div>
  </div>
</div>


<script src="tron-ares.js"></script>
  <script src="tron-ares-radio-bridge.js" defer></script>
</body>
</html>
